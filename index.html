<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>BKK ULQ – District Heat Platform (0–1)</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://unpkg.com/leaflet.heat/dist/leaflet-heat.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
</head>
<body>
<header>
  <h1>ดัชนีคุณภาพภูมิทัศนียภาพเมือง กทม. (0–1) — รายเขต</h1>
  <p>แผนที่แสดง <strong>Heat map</strong> และ <strong>Choropleth</strong> พร้อมตัวเลขรายเขต • ใช้งานฟรีบน GitHub Pages</p>
</header>

<main>
  <section class="card controls">
    <h2>นำเข้าข้อมูล</h2>
    <div class="row">
      <label>URL CSV (Google Sheets → Publish to the web → Aggregated_District → CSV):</label>
      <input id="csvUrl" type="url" placeholder="เช่น https://docs.google.com/.../pub?gid=...&single=true&output=csv" />
      <button id="btnLoad">โหลด</button>
      <span class="muted">หรือ</span>
      <input id="csvFile" type="file" accept=".csv,text/csv" />
    </div>
    <div class="row">
      <label>อัปโหลด GeoJSON ขอบเขต <em>เขต</em> (ถ้ามีไฟล์ของจริง):</label>
      <input id="geoFile" type="file" accept=".json,.geojson,application/geo+json,application/json" />
      <span class="muted">ถ้าไม่อัปโหลด จะใช้ไฟล์ตัวอย่าง</span>
    </div>
    <div class="row">
      <label>อัปโหลด CSV Centroids (DISTRICT,LAT,LON) สำหรับ Heat map (ทางเลือก):</label>
      <input id="centFile" type="file" accept=".csv,text/csv" />
      <span class="muted">ถ้าไม่อัปโหลด จะใช้ไฟล์ตัวอย่าง</span>
    </div>
    <div id="status" class="status"></div>
  </section>

  <section class="grid">
    <div class="card">
      <h2>แผนที่</h2>
      <div id="map"></div>
      <div class="legend" id="legend"></div>
      <div class="toggles">
        <label><input type="checkbox" id="chkChoro" checked /> แสดงชอร์โอพลีธ (เขต)</label>
        <label><input type="checkbox" id="chkHeat" checked /> แสดงฮีตแมป (centroids)</label>
        <label><input type="checkbox" id="chkLabels" checked /> แสดงตัวเลขบนแผนที่</label>
      </div>
    </div>
    <div class="card">
      <h2>ตารางคะแนนรายเขต</h2>
      <table id="tbl">
        <thead><tr><th>เขต</th><th>คะแนน (0–1)</th><th>ช่วงชั้น</th></tr></thead>
        <tbody></tbody>
      </table>
    </div>
  </section>
</main>

<footer>
  <small>Leaflet © OSM contributors • leaflet-heat • PapaParse • Static site</small>
</footer>

<script src="app.js"></script>
</body>
</html>
